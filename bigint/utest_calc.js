function gen_method(method) {
	return function (a_str, b_str, c_str) {
		return function () {
			var a = new Bigint(a_str),
			    b = new Bigint(b_str),
			    c = a[method](b);
			return [
			//	[ a, new Bigint(a_str) ],
			//	[ b, new Bigint(b_str) ],
				[ c, new Bigint(c_str) ]
			];
		};
	}
}

var gen_add = gen_method('add');
utest('#add()', [
	gen_add('0', '0', '0'),
	gen_add('123', '0', '123'),
	gen_add('-123', '0', '-123'),
	gen_add('0', '123', '123'),
	gen_add('0', '-123', '-123'),
	gen_add('123', '987', '1110'),
	gen_add('-123', '987', '864'),
	gen_add('987', '123', '1110'),
	gen_add('987', '-123', '864'),
	gen_add('123', '-987', '-864'),
	gen_add('-123', '-987', '-1110'),
	gen_add('-987', '123', '-864'),
	gen_add('-987', '-123', '-1110'),
	gen_add('1234567890123456789012345678901234567890', '0', '1234567890123456789012345678901234567890'),
	gen_add('-1234567890123456789012345678901234567890', '0', '-1234567890123456789012345678901234567890'),
	gen_add('0', '1234567890123456789012345678901234567890', '1234567890123456789012345678901234567890'),
	gen_add('0', '-1234567890123456789012345678901234567890', '-1234567890123456789012345678901234567890'),
	gen_add('1234567890123456789012345678901234567890', '9876543210987654321098765432109876543210', '11111111101111111110111111111011111111100'),
	gen_add('-1234567890123456789012345678901234567890', '9876543210987654321098765432109876543210', '8641975320864197532086419753208641975320'),
	gen_add('9876543210987654321098765432109876543210', '1234567890123456789012345678901234567890', '11111111101111111110111111111011111111100'),
	gen_add('9876543210987654321098765432109876543210', '-1234567890123456789012345678901234567890', '8641975320864197532086419753208641975320'),
	gen_add('1234567890123456789012345678901234567890', '-9876543210987654321098765432109876543210', '-8641975320864197532086419753208641975320'),
	gen_add('-1234567890123456789012345678901234567890', '-9876543210987654321098765432109876543210', '-11111111101111111110111111111011111111100'),
	gen_add('-9876543210987654321098765432109876543210', '1234567890123456789012345678901234567890', '-8641975320864197532086419753208641975320'),
	gen_add('-9876543210987654321098765432109876543210', '-1234567890123456789012345678901234567890', '-11111111101111111110111111111011111111100'),
	function () {
		var N = new Bigint(54321);
		for (var i = 1; i <= 10000; ++i) N = N.add(new Bigint(i));
		return [ [ N, new Bigint('50059321') ] ];
	},
	function () {
		var N = new Bigint(1234567);
		for (var i = 1; i <= 10000; ++i) N = N.add(new Bigint(i));
		return [ [ N, new Bigint('51239567') ] ];
	},
	function () {
		var N = new Bigint('2147483648');
		for (var i = 1; i <= 10000; ++i) N = N.add(new Bigint(''+i+i));
		return [ [ N, new Bigint('498647529598') ] ];
	},
	function () {
		var N = new Bigint('1234567890123456789012345678901234567890');
		for (var i = 1; i <= 10000; ++i) N = N.add(new Bigint(''+i+i+i+i+i+i+i+i+i+i));
		return [ [ N, new Bigint('10000149502684623389768952884026436728587738663340') ] ];
	}
]);

var gen_sub = gen_method('sub');
utest('#sub()', [
	gen_sub('0', '0', '0'),
	gen_sub('123', '0', '123'),
	gen_sub('-123', '0', '-123'),
	gen_sub('0', '123', '-123'),
	gen_sub('0', '-123', '123'),
	gen_sub('123', '987', '-864'),
	gen_sub('-123', '987', '-1110'),
	gen_sub('987', '123', '864'),
	gen_sub('987', '-123', '1110'),
	gen_sub('123', '-987', '1110'),
	gen_sub('-123', '-987', '864'),
	gen_sub('-987', '123', '-1110'),
	gen_sub('-987', '-123', '-864'),
	gen_sub('1234567890123456789012345678901234567890', '0', '1234567890123456789012345678901234567890'),
	gen_sub('-1234567890123456789012345678901234567890', '0', '-1234567890123456789012345678901234567890'),
	gen_sub('0', '1234567890123456789012345678901234567890', '-1234567890123456789012345678901234567890'),
	gen_sub('0', '-1234567890123456789012345678901234567890', '1234567890123456789012345678901234567890'),
	gen_sub('1234567890123456789012345678901234567890', '9876543210987654321098765432109876543210', '-8641975320864197532086419753208641975320'),
	gen_sub('-1234567890123456789012345678901234567890', '9876543210987654321098765432109876543210', '-11111111101111111110111111111011111111100'),
	gen_sub('9876543210987654321098765432109876543210', '1234567890123456789012345678901234567890', '8641975320864197532086419753208641975320'),
	gen_sub('9876543210987654321098765432109876543210', '-1234567890123456789012345678901234567890', '11111111101111111110111111111011111111100'),
	gen_sub('1234567890123456789012345678901234567890', '-9876543210987654321098765432109876543210', '11111111101111111110111111111011111111100'),
	gen_sub('-1234567890123456789012345678901234567890', '-9876543210987654321098765432109876543210', '8641975320864197532086419753208641975320'),
	gen_sub('-9876543210987654321098765432109876543210', '1234567890123456789012345678901234567890', '-11111111101111111110111111111011111111100'),
	gen_sub('-9876543210987654321098765432109876543210', '-1234567890123456789012345678901234567890', '-8641975320864197532086419753208641975320'),
	function () {
		var N = new Bigint(54321);
		for (var i = 1; i <= 10000; ++i) N = N.sub(new Bigint(i));
		return [ [ N, new Bigint('-49950679') ] ];
	},
	function () {
		var N = new Bigint(1234567);
		for (var i = 1; i <= 10000; ++i) N = N.sub(new Bigint(i));
		return [ [ N, new Bigint('-48770433') ] ];
	},
	function () {
		var N = new Bigint('2147483648');
		for (var i = 1; i <= 10000; ++i) N = N.sub(new Bigint(''+i+i));
		return [ [ N, new Bigint('-494352562302') ] ];
	},
	function () {
		var N = new Bigint('1234567890123456789012345678901234567890');
		for (var i = 1; i <= 10000; ++i) N = N.sub(new Bigint(''+i+i+i+i+i+i+i+i+i+i));
		return [ [ N, new Bigint('-10000149500215487609522039306001745370785269527560') ] ];
	}
]);

var gen_mul = gen_method('mul');
utest('#mul()', [
	gen_mul('0', '0', '0'),
	gen_mul('123', '0', '0'),
	gen_mul('-123', '0', '0'),
	gen_mul('0', '123', '0'),
	gen_mul('0', '-123', '0'),
	gen_mul('123', '987', '121401'),
	gen_mul('-123', '987', '-121401'),
	gen_mul('987', '123', '121401'),
	gen_mul('987', '-123', '-121401'),
	gen_mul('123', '-987', '-121401'),
	gen_mul('-123', '-987', '121401'),
	gen_mul('-987', '123', '-121401'),
	gen_mul('-987', '-123', '121401'),
	gen_mul('1234567890123456789012345678901234567890', '0', '0'),
	gen_mul('-1234567890123456789012345678901234567890', '0', '0'),
	gen_mul('0', '1234567890123456789012345678901234567890', '0'),
	gen_mul('0', '-1234567890123456789012345678901234567890', '0'),
	gen_mul('1234567890123456789012345678901234567890', '9876543210987654321098765432109876543210', '12193263113702179522618503273386678859448712086533622923332237463801111263526900'),
	gen_mul('-1234567890123456789012345678901234567890', '9876543210987654321098765432109876543210', '-12193263113702179522618503273386678859448712086533622923332237463801111263526900'),
	gen_mul('9876543210987654321098765432109876543210', '1234567890123456789012345678901234567890', '12193263113702179522618503273386678859448712086533622923332237463801111263526900'),
	gen_mul('9876543210987654321098765432109876543210', '-1234567890123456789012345678901234567890', '-12193263113702179522618503273386678859448712086533622923332237463801111263526900'),
	gen_mul('1234567890123456789012345678901234567890', '-9876543210987654321098765432109876543210', '-12193263113702179522618503273386678859448712086533622923332237463801111263526900'),
	gen_mul('-1234567890123456789012345678901234567890', '-9876543210987654321098765432109876543210', '12193263113702179522618503273386678859448712086533622923332237463801111263526900'),
	gen_mul('-9876543210987654321098765432109876543210', '1234567890123456789012345678901234567890', '-12193263113702179522618503273386678859448712086533622923332237463801111263526900'),
	gen_mul('-9876543210987654321098765432109876543210', '-1234567890123456789012345678901234567890', '12193263113702179522618503273386678859448712086533622923332237463801111263526900'),
	function () {
		var N = new Bigint(54321);
		for (var i = 1; i <= 1000; ++i) N = N.mul(new Bigint(i));
		return [ [ N, new Bigint('21858078354647810872667459913131499508262161998790229554411754934464689932005927027580433449220665038166873461294521887100930776207950995728078811751501060127571096486513933712550418281768619139206942542764014394162049542098301905472642284379292325026474372359513431878639651033590302393534858601294743175208778951504429548739982747672727354020495848779624130908449797510688122406422384446987038676042473277901753317827259587848344459188181858293901694890240805329321935824599988091301690700830639779495310139616826530122326502538905203007511657536022450493393394443730961572894458889449678782214890446956235437576901606204994871498472477052670446036585755585411883584015167687190550012429784895378817731912148002295640003051320403965857068720401278263725182534153864584524455605469288063671666077934762486772522158621389831009624246924714397190184817085164074506628237477101098487155628366395068953490063081117738200479269989655284232394021953001456828341161892917657600077706397366542187319156769552603749465473238374516246314901146592180226467713531719930046596577659485894138334634348154594523822732868757414438430221736028213184029677404066358044477058596044849534213300312324978628489714462070301527195689085279630743116075415572744325823568868366827240490844111268545942778205021790105229428631800670923972353741153163520987128135464797599695566439292780204741774668474795968639509885924069330870148679555063152661531959031978641726974288362413346112846743869856963752053570981154291194489892967206427375687628799473670489719485465797451109661256283751659520977359916474073984420361664484410090202068464218114068090890388357416209190546621070771945558000208361308545689647810350414552285195042021631690808679907175276942662018892572981042376459223090794382868792846320553153995547427113676722525127523455480705028663436099274438842979512133601835255282787547878193070077454061782752133503485194214402605607082793535427354260730638030752713328109897107315088148219788596155141218817636092814778131891604266847374760870702433090385895607186165745677603560146728951824108583545927723407817473339492425683303378692125049251100755816091777930726485334809132912214855568469598325478011849611169608180020295045289511721404610182786363635908939951888728296253544921611038213649914014632600244439935943293446743302877596352512000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000') ] ];
	}
]);

var gen_divmod = function (a_str, b_str, c_str, d_str) {
	return function () {
		var a = new Bigint(a_str),
		    b = new Bigint(b_str),
		    c = a.div(b),
		    d = a.mod(b);
		return [
		//	[ a, new Bigint(a_str) ],
		//	[ b, new Bigint(b_str) ],
			[ c, new Bigint(c_str) ],
			[ d, new Bigint(d_str) ]
		];
	};
};

utest('#div(), #mod()', [
	gen_divmod('0', '123', '0', '0'),
	gen_divmod('0', '-123', '0', '0'),
	gen_divmod('123', '987', '0', '123'),
	gen_divmod('-123', '987', '0', '-123'),
	gen_divmod('123', '-987', '0', '123'),
	gen_divmod('-123', '-987', '0', '-123'),
	gen_divmod('987', '123', '8', '3'),
	gen_divmod('987', '-123', '-8', '3'),
	gen_divmod('-987', '123', '-8', '-3'),
	gen_divmod('-987', '-123', '8', '-3'),
	gen_divmod('1234567890123456789012345678901234567890', '9876543210987654321098765432109876543210', '0', '1234567890123456789012345678901234567890'),
	gen_divmod('-1234567890123456789012345678901234567890', '9876543210987654321098765432109876543210', '0', '-1234567890123456789012345678901234567890'),
	gen_divmod('1234567890123456789012345678901234567890', '-9876543210987654321098765432109876543210', '0', '1234567890123456789012345678901234567890'),
	gen_divmod('-1234567890123456789012345678901234567890', '-9876543210987654321098765432109876543210', '0', '-1234567890123456789012345678901234567890'),
	gen_divmod('9876543210987654321098765432109876543210', '1234567890123456789012345678901234567890', '8', '90000000009000000000900000000090'),
	gen_divmod('9876543210987654321098765432109876543210', '-1234567890123456789012345678901234567890', '-8', '90000000009000000000900000000090'),
	gen_divmod('-9876543210987654321098765432109876543210', '1234567890123456789012345678901234567890', '-8', '-90000000009000000000900000000090'),
	gen_divmod('-9876543210987654321098765432109876543210', '-1234567890123456789012345678901234567890', '8', '-90000000009000000000900000000090')
]);
